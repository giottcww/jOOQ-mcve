//package org.jooq.mcve
//
//import io.r2dbc.spi.ConnectionFactory
//import org.jooq.DSLContext
//import org.jooq.ExecuteListenerProvider
//import org.jooq.SQLDialect
//import org.jooq.impl.DSL
//import org.jooq.impl.DefaultConfiguration
//import org.jooq.impl.DefaultExecuteListenerProvider
//import org.springframework.beans.factory.ObjectProvider
//import org.springframework.boot.autoconfigure.jooq.JooqExceptionTranslator
//import org.springframework.context.annotation.Bean
//import org.springframework.context.annotation.Configuration
//
//@Configuration
//open class JooqR2dbcAutoConfiguration{
//
//    @Bean
//    open fun dslContext(configuration: org.jooq.Configuration): DSLContext = DSL.using(configuration)
//
//    @Bean
//    open fun jooqConfig(
//        connectionFactory: ConnectionFactory,
//        executeListenerProviders: ObjectProvider<ExecuteListenerProvider>
//    ) : DefaultConfiguration {
//        val config = DefaultConfiguration()
//        config.setSQLDialect(SQLDialect.POSTGRES)
//        config.setConnectionFactory(connectionFactory)
//        config.set(*executeListenerProviders.orderedStream().toList().toTypedArray())
//        return config
//    }
//
//    @Bean
//    open fun jooqExceptionTranslator() : DefaultExecuteListenerProvider{
//        return DefaultExecuteListenerProvider(JooqExceptionTranslator())
//    }
//}